<main class="main">
  <section class="home-slider position-relative pt-50">
    <div class="hero-slider-1 dot-style-1 dot-style-1-position-1">
      <div class="single-hero-slider single-animation-wrap">
        <div class="container">
          <div class="row align-items-center slider-animated-1">
            <div class="col-lg-5 col-md-6">
              <div class="hero-slider-content-2">
                <h4 class="animated">Trade-in offer</h4>
                <h2 class="animated fw-900">Supper value deals</h2>
                <h1 class="animated fw-900 text-brand">On all products</h1>
                <p class="animated">Save more with coupons & up to 70% off</p>
                <a class="animated btn btn-brush btn-brush-3" href="/">
                  Shop Now
                </a>
              </div>
            </div>
            <div class="col-lg-7 col-md-6">
              <div class="single-slider-img single-slider-img-1">
                <img
                  class="animated slider-1-1"
                  src="/frd/assets/imgs/slider/slider-1.png"
                  alt=""
                />
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="single-hero-slider single-animation-wrap">
        <div class="container">
          <div class="row align-items-center slider-animated-1">
            <div class="col-lg-5 col-md-6">
              <div class="hero-slider-content-2">
                <h4 class="animated">Hot promotions</h4>
                <h2 class="animated fw-900">Fashion Trending</h2>
                <h1 class="animated fw-900 text-7">Great Collection</h1>
                <p class="animated">Save more with coupons & up to 20% off</p>
                <a class="animated btn btn-brush btn-brush-2" href="/">
                  Discover Now
                </a>
              </div>
            </div>
            <div class="col-lg-7 col-md-6">
              <div class="single-slider-img single-slider-img-1">
                <img
                  class="animated slider-1-2"
                  src="/frd/assets/imgs/slider/slider-2.png"
                  alt=""
                />
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="single-hero-slider single-animation-wrap">
        <div class="container">
          <div class="row align-items-center slider-animated-1">
            <div class="col-lg-5 col-md-6">
              <div class="hero-slider-content-2">
                <h4 class="animated">Upcoming Offer</h4>
                <h2 class="animated fw-900">Big Deals From</h2>
                <h1 class="animated fw-900 text-8">Manufacturer</h1>
                <p class="animated">Clothing, Shoes, Bags, Wallets...</p>
                <a class="animated btn btn-brush btn-brush-1" href="/">
                  Shop Now
                </a>
              </div>
            </div>
            <div class="col-lg-7 col-md-6">
              <div class="single-slider-img single-slider-img-1">
                <img
                  class="animated slider-1-3"
                  src="/frd/assets/imgs/slider/slider-3.png"
                  alt=""
                />
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="slider-arrow hero-slider-1-arrow"></div>
  </section>
  <section class="featured section-padding position-relative">
    <div class="container">
      <div class="row">
        <div class="col-lg-2 col-md-4 mb-md-3 mb-lg-0">
          <div class="banner-features wow fadeIn animated hover-up">
            <img src="/frd/assets/imgs/theme/icons/feature-1.png" alt="" />
            <h4 class="bg-1">Free Shipping</h4>
          </div>
        </div>
        <div class="col-lg-2 col-md-4 mb-md-3 mb-lg-0">
          <div class="banner-features wow fadeIn animated hover-up">
            <img src="/frd/assets/imgs/theme/icons/feature-2.png" alt="" />
            <h4 class="bg-3">Online Order</h4>
          </div>
        </div>
        <div class="col-lg-2 col-md-4 mb-md-3 mb-lg-0">
          <div class="banner-features wow fadeIn animated hover-up">
            <img src="/frd/assets/imgs/theme/icons/feature-3.png" alt="" />
            <h4 class="bg-2">Save Money</h4>
          </div>
        </div>
        <div class="col-lg-2 col-md-4 mb-md-3 mb-lg-0">
          <div class="banner-features wow fadeIn animated hover-up">
            <img src="/frd/assets/imgs/theme/icons/feature-4.png" alt="" />
            <h4 class="bg-4">Promotions</h4>
          </div>
        </div>
        <div class="col-lg-2 col-md-4 mb-md-3 mb-lg-0">
          <div class="banner-features wow fadeIn animated hover-up">
            <img src="/frd/assets/imgs/theme/icons/feature-5.png" alt="" />
            <h4 class="bg-5">Happy Sell</h4>
          </div>
        </div>
        <div class="col-lg-2 col-md-4 mb-md-3 mb-lg-0">
          <div class="banner-features wow fadeIn animated hover-up">
            <img src="/frd/assets/imgs/theme/icons/feature-6.png" alt="" />
            <h4 class="bg-6">24/7 Support</h4>
          </div>
        </div>
      </div>
    </div>
  </section>
  <section
    class="product-tabs section-padding position-relative wow fadeIn animated"
  >
    <div class="bg-square"></div>
    <div class="container">
      <div class="tab-header">
        <ul class="nav nav-tabs" id="myTab" role="tablist">
          <li class="nav-item" role="presentation">
            <button
              class="nav-link active"
              id="nav-tab-one"
              data-bs-toggle="tab"
              data-bs-target="#tab-one"
              type="button"
              role="tab"
              aria-controls="tab-one"
              aria-selected="true"
            >
              New added
            </button>
          </li>
        </ul>
        <a href="#" class="view-more d-none d-md-flex"
          >View More<i class="fi-rs-angle-double-small-right"></i
        ></a>
      </div>
      <!--End nav-tabs-->
      <div class="tab-content wow fadeIn animated" id="myTabContent">
        <div
          class="tab-pane fade show active"
          id="tab-one"
          role="tabpanel"
          aria-labelledby="tab-one"
        >
        <div class="row product-grid-4">
          <% products.filter(product => product.isActive).slice(0, 8).forEach(product => { %>
            <div class="col-lg-3 col-md-4 col-12 col-sm-6">
              <div class="product-cart-wrap mb-30">
                <div class="product-img-action-wrap">
                  <div class="product-img product-img-zoom">
                    <a href="/shop/quickView/<%- product._id %>">
                      <img src="/uploads/products-images/crp/<%- product.primaryImages[0] ? product.primaryImages[0].name : product.secondaryImages[0].name %>" alt="IMG-PRODUCT" />
                    </a>
                  </div>
                  <div class="product-action-1">
                    <a aria-label="Quick view" class="action-btn hover-up" href="/shop/quickView/<%- product._id %>" data-bs-toggle="modal" data-bs-target="#quickViewModal">
                      <i class="fi-rs-eye"></i>
                    </a>
                    <% 
                      const productIdStr = String(product._id); 
                      const wishlist = wishlist ? wishlist.map(String) : []; 
                      if (wishlist.includes(productIdStr)) { %>
                      <a aria-label="Remove From Wishlist" class="action-btn hover-up wishlist-btn active" data-product-id="<%- product._id %>">
                        <i class="fi-rs-heart-filled"></i>
                      </a>
                    <% } else { %>
                      <a aria-label="Add To Wishlist" class="action-btn hover-up wishlist-btn" data-product-id="<%- product._id %>">
                        <i class="fi-rs-heart"></i>
                      </a>
                    <% } %>
                  </div>
                </div>
                <div class="product-content-wrap">
                  <div class="product-category">
                    <a href="shop-grid-right.html"><%= product.category.name %></a>
                  </div>
                  <h2>
                    <a href="/shop/productDetails/<%- product._id %>"><%= product.product_name %></a>
                  </h2>
                  <div class="rating-result" title="90%">
                    <span><span>90%</span></span>
                  </div>
                  <div class="product-price">
                    <span>$<%= product.price %>.00</span>
                    <span class="old-price">$<%= product.oldPrice %>.00</span>
                  </div>
                  <div class="product-action-1 show">
                    <a aria-label="Add To Cart" class="action-btn hover-up" href="shop-cart.html">
                      <i class="fi-rs-shopping-bag-add"></i>
                    </a>
                  </div>
                </div>
              </div>
            </div>
          <% }) %>
        </div>
        
        
        </div>
      </div>
    </div>
  </section>

  <section class="banner-2 section-padding pb-0">
    <div class="container">
      <div class="banner-img banner-big wow fadeIn animated f-none">
        <img src="frd/assets/imgs/banner/banner-4.png" alt="" />
        <div class="banner-text d-md-block d-none">
          <h4 class="mb-15 mt-40 text-brand">Repair Services</h4>
          <h1 class="fw-600 mb-20">
            We're an Apple <br />Authorised Service Provider
          </h1>
          <a href="shop-grid-right.html" class="btn"
            >Learn More <i class="fi-rs-arrow-right"></i
          ></a>
        </div>
      </div>
    </div>
  </section>
  <section class="popular-categories section-padding mt-15 mb-25">
    <div class="container wow fadeIn animated">
      <h3 class="section-title mb-20"><span>Popular</span> Categories</h3>
      <div class="carausel-6-columns-cover position-relative">
        <div
          class="slider-arrow slider-arrow-2 carausel-6-columns-arrow"
          id="carausel-6-columns-arrows"
        ></div>
        <div class="carausel-6-columns" id="carausel-6-columns">
          <div class="card-1">
            <figure class="img-hover-scale overflow-hidden">
              <a href="shop-grid-right.html"
                ><img src="frd/assets/imgs/shop/category-thumb-1.jpg" alt=""
              /></a>
            </figure>
            <h5><a href="shop-grid-right.html">T-Shirt</a></h5>
          </div>
          <div class="card-1">
            <figure class="img-hover-scale overflow-hidden">
              <a href="shop-grid-right.html">
                <img src="frd/assets/imgs/shop/category-thumb-2.jpg" alt=""
              /></a>
            </figure>
            <h5><a href="shop-grid-right.html">Bags</a></h5>
          </div>
          <div class="card-1">
            <figure class="img-hover-scale overflow-hidden">
              <a href="shop-grid-right.html"
                ><img src="frd/assets/imgs/shop/category-thumb-3.jpg" alt=""
              /></a>
            </figure>
            <h5><a href="shop-grid-right.html">Sandan</a></h5>
          </div>
          <div class="card-1">
            <figure class="img-hover-scale overflow-hidden">
              <a href="shop-grid-right.html"
                ><img src="frd/assets/imgs/shop/category-thumb-4.jpg" alt=""
              /></a>
            </figure>
            <h5><a href="shop-grid-right.html">Scarf Cap</a></h5>
          </div>
          <div class="card-1">
            <figure class="img-hover-scale overflow-hidden">
              <a href="shop-grid-right.html"
                ><img src="frd/assets/imgs/shop/category-thumb-5.jpg" alt=""
              /></a>
            </figure>
            <h5><a href="shop-grid-right.html">Shoes</a></h5>
          </div>
          <div class="card-1">
            <figure class="img-hover-scale overflow-hidden">
              <a href="shop-grid-right.html"
                ><img src="frd/assets/imgs/shop/category-thumb-6.jpg" alt=""
              /></a>
            </figure>
            <h5><a href="shop-grid-right.html">Pillowcase</a></h5>
          </div>
          <div class="card-1">
            <figure class="img-hover-scale overflow-hidden">
              <a href="shop-grid-right.html"
                ><img src="frd/assets/imgs/shop/category-thumb-7.jpg" alt=""
              /></a>
            </figure>
            <h5><a href="shop-grid-right.html">Jumpsuits</a></h5>
          </div>
          <div class="card-1">
            <figure class="img-hover-scale overflow-hidden">
              <a href="shop-grid-right.html"
                ><img src="frd/assets/imgs/shop/category-thumb-8.jpg" alt=""
              /></a>
            </figure>
            <h5><a href="shop-grid-right.html">Hats</a></h5>
          </div>
        </div>
      </div>
    </div>
  </section>
  <section class="banners mb-15">
    <div class="container">
      <div class="row">
        <div class="col-lg-4 col-md-6">
          <div class="banner-img wow fadeIn animated">
            <img src="frd/assets/imgs/banner/banner-1.png" alt="" />
            <div class="banner-text">
              <span>Smart Offer</span>
              <h4>Save 20% on <br />Woman Bag</h4>
              <a href="shop-grid-right.html"
                >Shop Now <i class="fi-rs-arrow-right"></i
              ></a>
            </div>
          </div>
        </div>
        <div class="col-lg-4 col-md-6">
          <div class="banner-img wow fadeIn animated">
            <img src="frd/assets/imgs/banner/banner-2.png" alt="" />
            <div class="banner-text">
              <span>Sale off</span>
              <h4>Great Summer <br />Collection</h4>
              <a href="shop-grid-right.html"
                >Shop Now <i class="fi-rs-arrow-right"></i
              ></a>
            </div>
          </div>
        </div>
        <div class="col-lg-4 d-md-none d-lg-flex">
          <div class="banner-img wow fadeIn animated mb-sm-0">
            <img src="frd/assets/imgs/banner/banner-3.png" alt="" />
            <div class="banner-text">
              <span>New Arrivals</span>
              <h4>Shop Today’s <br />Deals & Offers</h4>
              <a href="shop-grid-right.html"
                >Shop Now <i class="fi-rs-arrow-right"></i
              ></a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <section class="section-padding">
    <div class="container wow fadeIn animated">
      <h3 class="section-title mb-20"><span>New</span> Arrivals</h3>
      <div class="carausel-6-columns-cover position-relative">
        <div
          class="slider-arrow slider-arrow-2 carausel-6-columns-arrow"
          id="carausel-6-columns-2-arrows"
        ></div>
        <div
          class="carausel-6-columns carausel-arrow-center"
          id="carausel-6-columns-2"
        >
          <div class="product-cart-wrap small hover-up">
            <div class="product-img-action-wrap">
              <div class="product-img product-img-zoom">
                <a href="shop-product-right.html">
                  <img
                    class="default-img"
                    src="frd/assets/imgs/shop/product-2-1.jpg"
                    alt=""
                  />
                  <img
                    class="hover-img"
                    src="frd/assets/imgs/shop/product-2-2.jpg"
                    alt=""
                  />
                </a>
              </div>
              <div class="product-action-1">
                <a
                  aria-label="Quick view"
                  class="action-btn small hover-up"
                  data-bs-toggle="modal"
                  data-bs-target="#quickViewModal"
                >
                  <i class="fi-rs-eye"></i
                ></a>
                <a
                  aria-label="Add To Wishlist"
                  class="action-btn small hover-up"
                  href="shop-wishlist.html"
                  tabindex="0"
                  ><i class="fi-rs-heart"></i
                ></a>
                <a
                  aria-label="Compare"
                  class="action-btn small hover-up"
                  href="shop-compare.html"
                  tabindex="0"
                  ><i class="fi-rs-shuffle"></i
                ></a>
              </div>
              <div
                class="product-badges product-badges-position product-badges-mrg"
              >
                <span class="hot">Hot</span>
              </div>
            </div>
            <div class="product-content-wrap">
              <h2><a href="shop-product-right.html">Lorem ipsum dolor</a></h2>
              <div class="rating-result" title="90%">
                <span> </span>
              </div>
              <div class="product-price">
                <span>$238.85 </span>
                <span class="old-price">$245.8</span>
              </div>
            </div>
          </div>
          <!--End product-cart-wrap-2-->
          <div class="product-cart-wrap small hover-up">
            <div class="product-img-action-wrap">
              <div class="product-img product-img-zoom">
                <a href="shop-product-right.html">
                  <img
                    class="default-img"
                    src="frd/assets/imgs/shop/product-4-1.jpg"
                    alt=""
                  />
                  <img
                    class="hover-img"
                    src="frd/assets/imgs/shop/product-4-2.jpg"
                    alt=""
                  />
                </a>
              </div>
              <div class="product-action-1">
                <a
                  aria-label="Quick view"
                  class="action-btn small hover-up"
                  data-bs-toggle="modal"
                  data-bs-target="#quickViewModal"
                >
                  <i class="fi-rs-eye"></i></a>
                <a
                  aria-label="Add To Wishlist"
                  class="action-btn small hover-up"
                  href="shop-wishlist.html"
                  tabindex="0"
                  ><i class="fi-rs-heart"></i></a>
                <a
                  aria-label="Compare"
                  class="action-btn small hover-up"
                  href="shop-compare.html"
                  tabindex="0"
                  ><i class="fi-rs-shuffle"></i
                ></a>
              </div>
              <div
                class="product-badges product-badges-position product-badges-mrg"
              >
                <span class="new">New</span>
              </div>
            </div>
            <div class="product-content-wrap">
              <h2><a href="shop-product-right.html">Aliquam posuere</a></h2>
              <div class="rating-result" title="90%">
                <span> </span>
              </div>
              <div class="product-price">
                <span>$173.85 </span>
                <span class="old-price">$185.8</span>
              </div>
            </div>
          </div>
          <!--End product-cart-wrap-2-->
          <div class="product-cart-wrap small hover-up">
            <div class="product-img-action-wrap">
              <div class="product-img product-img-zoom">
                <a href="shop-product-right.html">
                  <img
                    class="default-img"
                    src="frd/assets/imgs/shop/product-15-1.jpg"
                    alt=""
                  />
                  <img
                    class="hover-img"
                    src="frd/assets/imgs/shop/product-15-2.jpg"
                    alt=""
                  />
                </a>
              </div>
              <div class="product-action-1">
                <a
                  aria-label="Quick view"
                  class="action-btn small hover-up"
                  data-bs-toggle="modal"
                  data-bs-target="#quickViewModal"
                >
                  <i class="fi-rs-eye"></i
                ></a>
                <a
                  aria-label="Add To Wishlist"
                  class="action-btn small hover-up"
                  href="shop-wishlist.html"
                  tabindex="0"
                  ><i class="fi-rs-heart"></i
                ></a>
                <a
                  aria-label="Compare"
                  class="action-btn small hover-up"
                  href="shop-compare.html"
                  tabindex="0"
                  ><i class="fi-rs-shuffle"></i
                ></a>
              </div>
              <div
                class="product-badges product-badges-position product-badges-mrg"
              >
                <span class="sale">Sale</span>
              </div>
            </div>
            <div class="product-content-wrap">
              <h2><a href="shop-product-right.html">Sed dapibus orci</a></h2>
              <div class="rating-result" title="90%">
                <span> </span>
              </div>
              <div class="product-price">
                <span>$215.85 </span>
                <span class="old-price">$235.8</span>
              </div>
            </div>
          </div>
          <!--End product-cart-wrap-2-->
          <div class="product-cart-wrap small hover-up">
            <div class="product-img-action-wrap">
              <div class="product-img product-img-zoom">
                <a href="shop-product-right.html">
                  <img
                    class="default-img"
                    src="frd/assets/imgs/shop/product-3-1.jpg"
                    alt=""
                  />
                  <img
                    class="hover-img"
                    src="frd/assets/imgs/shop/product-3-2.jpg"
                    alt=""
                  />
                </a>
              </div>
              <div class="product-action-1">
                <a
                  aria-label="Quick view"
                  class="action-btn small hover-up"
                  data-bs-toggle="modal"
                  data-bs-target="#quickViewModal"
                >
                  <i class="fi-rs-eye"></i
                ></a>
                <a
                  aria-label="Add To Wishlist"
                  class="action-btn small hover-up"
                  href="shop-wishlist.html"
                  tabindex="0"
                  ><i class="fi-rs-heart"></i
                ></a>
                <a
                  aria-label="Compare"
                  class="action-btn small hover-up"
                  href="shop-compare.html"
                  tabindex="0"
                  ><i class="fi-rs-shuffle"></i
                ></a>
              </div>
              <div
                class="product-badges product-badges-position product-badges-mrg"
              >
                <span class="hot">.33%</span>
              </div>
            </div>
            <div class="product-content-wrap">
              <h2><a href="shop-product-right.html">Donec congue</a></h2>
              <div class="rating-result" title="90%">
                <span> </span>
              </div>
              <div class="product-price">
                <span>$83.8 </span>
                <span class="old-price">$125.2</span>
              </div>
            </div>
          </div>
          <!--End product-cart-wrap-2-->
          <div class="product-cart-wrap small hover-up">
            <div class="product-img-action-wrap">
              <div class="product-img product-img-zoom">
                <a href="shop-product-right.html">
                  <img
                    class="default-img"
                    src="frd/assets/imgs/shop/product-9-1.jpg"
                    alt=""
                  />
                  <img
                    class="hover-img"
                    src="frd/assets/imgs/shop/product-9-2.jpg"
                    alt=""
                  />
                </a>
              </div>
              <div class="product-action-1">
                <a
                  aria-label="Quick view"
                  class="action-btn small hover-up"
                  data-bs-toggle="modal"
                  data-bs-target="#quickViewModal"
                >
                  <i class="fi-rs-eye"></i
                ></a>
                <a
                  aria-label="Add To Wishlist"
                  class="action-btn small hover-up"
                  href="shop-wishlist.html"
                  tabindex="0"
                  ><i class="fi-rs-heart"></i
                ></a>
                <a
                  aria-label="Compare"
                  class="action-btn small hover-up"
                  href="shop-compare.html"
                  tabindex="0"
                  ><i class="fi-rs-shuffle"></i
                ></a>
              </div>
              <div
                class="product-badges product-badges-position product-badges-mrg"
              >
                <span class="hot">-25%</span>
              </div>
            </div>
            <div class="product-content-wrap">
              <h2><a href="shop-product-right.html">Curabitur porta</a></h2>
              <div class="rating-result" title="90%">
                <span> </span>
              </div>
              <div class="product-price">
                <span>$1238.85 </span>
                <span class="old-price">$1245.8</span>
              </div>
            </div>
          </div>
          <!--End product-cart-wrap-2-->
          <div class="product-cart-wrap small hover-up">
            <div class="product-img-action-wrap">
              <div class="product-img product-img-zoom">
                <a href="shop-product-right.html">
                  <img
                    class="default-img"
                    src="frd/assets/imgs/shop/product-7-1.jpg"
                    alt=""
                  />
                  <img
                    class="hover-img"
                    src="frd/assets/imgs/shop/product-7-2.jpg"
                    alt=""
                  />
                </a>
              </div>
              <div class="product-action-1">
                <a
                  aria-label="Quick view"
                  class="action-btn small hover-up"
                  data-bs-toggle="modal"
                  data-bs-target="#quickViewModal"
                >
                  <i class="fi-rs-eye"></i
                ></a>
                <a
                  aria-label="Add To Wishlist"
                  class="action-btn small hover-up"
                  href="shop-wishlist.html"
                  tabindex="0"
                  ><i class="fi-rs-heart"></i
                ></a>
                <a
                  aria-label="Compare"
                  class="action-btn small hover-up"
                  href="shop-compare.html"
                  tabindex="0"
                  ><i class="fi-rs-shuffle"></i
                ></a>
              </div>
              <div
                class="product-badges product-badges-position product-badges-mrg"
              >
                <span class="new">New</span>
              </div>
            </div>
            <div class="product-content-wrap">
              <h2><a href="shop-product-right.html">Praesent maximus</a></h2>
              <div class="rating-result" title="90%">
                <span> </span>
              </div>
              <div class="product-price">
                <span>$123 </span>
                <span class="old-price">$156</span>
              </div>
            </div>
          </div>
          <!--End product-cart-wrap-2-->
          <div class="product-cart-wrap small hover-up">
            <div class="product-img-action-wrap">
              <div class="product-img product-img-zoom">
                <a href="shop-product-right.html">
                  <img
                    class="default-img"
                    src="frd/assets/imgs/shop/product-1-1.jpg"
                    alt=""
                  />
                  <img
                    class="hover-img"
                    src="frd/assets/imgs/shop/product-1-2.jpg"
                    alt=""
                  />
                </a>
              </div>
              <div class="product-action-1">
                <a
                  aria-label="Quick view"
                  class="action-btn small hover-up"
                  data-bs-toggle="modal"
                  data-bs-target="#quickViewModal"
                >
                  <i class="fi-rs-eye"></i
                ></a>
                <a
                  aria-label="Add To Wishlist"
                  class="action-btn small hover-up"
                  href="shop-wishlist.html"
                  tabindex="0"
                  ><i class="fi-rs-heart"></i
                ></a>
                <a
                  aria-label="Compare"
                  class="action-btn small hover-up"
                  href="shop-compare.html"
                  tabindex="0"
                  ><i class="fi-rs-shuffle"></i
                ></a>
              </div>
            </div>
            <div class="product-content-wrap">
              <h2><a href="shop-product-right.html">Vestibulum ante</a></h2>
              <div class="rating-result" title="90%">
                <span> </span>
              </div>
              <div class="product-price">
                <span>$238.85 </span>
                <span class="old-price">$245.8</span>
              </div>
            </div>
          </div>
          <!--End product-cart-wrap-2-->
        </div>
      </div>
    </div>
  </section>
</main>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
  document.addEventListener("DOMContentLoaded", (event) => {
    document.querySelectorAll(".wishlist-btn").forEach((button) => {
      button.addEventListener("click", function (e) {
        e.preventDefault();
        const productId = this.getAttribute("data-product-id");
        const isWished = this.classList.contains("wished");
        const url = isWished ? "/wishlist/remove" : "/wishlist/add";
        const confirmMessage = isWished
          ? "Do you want to remove this product from your wishlist?"
          : "Do you want to add this product to your wishlist?";

        // Show confirmation message with SweetAlert2
        Swal.fire({
          title: confirmMessage,
          icon: "question",
          showCancelButton: true,
          confirmButtonText: "Yes",
          cancelButtonText: "No",
        }).then((result) => {
          if (result.isConfirmed) {
            // Send a request to add or remove the product to/from the wishlist
            fetch(url, {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
              },
              body: JSON.stringify({ productId }),
            })
              .then((response) => response.json())
              .then((data) => {
                if (data.success) {
                  // Change heart icon color and state
                  const heartIcon = this.querySelector("i.fi-rs-heart");
                  if (isWished) {
                    this.classList.remove("wished");
                    heartIcon.style.color = ""; // Remove heart icon color
                  } else {
                    this.classList.add("wished");
                    heartIcon.style.color = "red"; // Set heart icon color to red
                  }
                  // Show success message
                  Swal.fire({
                    title: "Success!",
                    text: data.message,
                    icon: "success",
                    confirmButtonText: "OK",
                  });
                } else {
                  // Show error message
                  Swal.fire({
                    title: "Error!",
                    text: "Please log in to perform this action.",
                    icon: "error",
                    showCancelButton: true,
                    confirmButtonText: "Login",
                    cancelButtonText: "Cancel",
                  }).then((result) => {
                    if (result.isConfirmed) {
                      // Redirect to login page
                      window.location.href = "/login";
                    }
                  });
                }
              })
              .catch((error) => {
                console.error("Error:", error);
                // Show error message
                Swal.fire({
                  title: "Error!",
                  text: "An error occurred",
                  icon: "error",
                  confirmButtonText: "OK",
                });
              });
          }
        });
      });
    });
  });
</script>
